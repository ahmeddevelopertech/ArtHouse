<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Add a new tab to the partner form to show transactions across all branches -->
    <record id="view_partner_form_inherit_all_transactions" model="ir.ui.view">
        <field name="name">res.partner.form.inherit.all.transactions</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook" position="inside">
                <page name="all_branch_transactions" string="All Branch Transactions">
                    <!-- Sales Orders Section -->
                    <div class="oe_title">
                        <h3><i class="fa fa-shopping-cart"/> Sales Orders Across All Branches</h3>
                    </div>
                    <field name="all_company_sale_order_ids" mode="tree,form">
                        <tree limit="20">
                            <field name="name" string="Order Ref"/>
                            <field name="date_order" string="Date" widget="date"/>
                            <field name="company_id" string="Branch"/>
                            <field name="amount_total" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="state" widget="statusbar"/>
                        </tree>
                    </field>

                    <!-- Invoices Section -->
                    <div class="oe_title" style="margin-top: 20px;">
                        <h3><i class="fa fa-file-invoice"/> Invoices Across All Branches</h3>
                    </div>
                    <field name="all_company_invoice_ids" mode="tree,form">
                        <tree limit="20">
                            <field name="name" string="Invoice #"/>
                            <field name="invoice_date" string="Date" widget="date"/>
                            <field name="company_id" string="Branch"/>
                            <field name="amount_total" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="payment_state" string="Payment Status"/>
                            <field name="state" widget="statusbar"/>
                        </tree>
                    </field>

                    <!-- Payments Section -->
                    <div class="oe_title" style="margin-top: 20px;">
                        <h3><i class="fa fa-money-bill-wave"/> Payments Across All Branches</h3>
                    </div>
                    <field name="all_company_payment_ids" mode="tree,form">
                        <tree limit="20">
                            <field name="name" string="Payment #"/>
                            <field name="date" string="Date" widget="date"/>
                            <field name="company_id" string="Branch"/>
                            <field name="amount" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="payment_method_line_id" string="Method"/>
                            <field name="state" widget="statusbar"/>
                        </tree>
                    </field>

                    <!-- Journal Entries Section -->
                    <div class="oe_title" style="margin-top: 20px;">
                        <h3><i class="fa fa-book"/> Journal Entries Across All Branches</h3>
                    </div>
                    <field name="all_company_account_move_ids" mode="tree,form">
                        <tree limit="20">
                            <field name="name" string="Reference"/>
                            <field name="date" string="Date" widget="date"/>
                            <field name="company_id" string="Branch"/>
                            <field name="amount_total" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="payment_state" string="Payment Status"/>
                            <field name="state" widget="statusbar"/>
                        </tree>
                    </field>
                </page>
            </xpath>
        </field>
    </record>
</odoo>